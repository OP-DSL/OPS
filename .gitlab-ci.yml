stages:
  - test_gnu11
  - test

build_test_gnu11:
  stage: test_gnu11
  tags:
    - CCP, test
  script:
    - source ~/.bash_aliases
    - module avail 
    - module load CUDA
    - export CXX=mpicxx
    - cmake -S . -B build -DCMAKE_INSTALL_PREFIX=./build/opt -DOPS_TEST_FULL=ON 
    - cmake --build build -j 6
    - cmake --install build 
    - ctest --test-dir build --output-on-failure 

job_test:
  stage: test
  tags:
    - CCP, test
  script:
    - echo "Running tests"

